% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dtsus_download.R
\name{dtsus_download}
\alias{dtsus_download}
\title{Accessing and Processing DATASUS Microdata}
\usage{
dtsus_download(
  fonte = NA,
  tipo = NA,
  uf = NA,
  Data_inicio = NA,
  Data_fim = NULL,
  open = TRUE,
  filtro = NULL,
  colunas = NULL,
  save.dbc = FALSE,
  pasta.dbc = NULL,
  return_files = T
)
}
\arguments{
\item{fonte}{Character. The abbreviation of the health information system to be accessed,
e.g. "CNES", "SIH", "SIA".}

\item{tipo}{Character. The abbreviation of the file type to be accessed, e.g. "LT", "RD".}

\item{uf}{Character. A UF code or a vector of UF codes (e.g. "MG", "SP", "BR").}

\item{Data_inicio}{Numeric or character. Start date in the format yyyymm (monthly)
or yyyy (annual), depending on the selected dataset.}

\item{Data_fim}{Numeric or character. End date in the format yyyymm (monthly)
or yyyy (annual), depending on the selected dataset.}

\item{open}{Logical. If TRUE, the downloaded files are read and returned as data.}

\item{filtro}{List. Optional filter specification with two fields:
\code{list(coluna = "COL", valor = c("X","Y"))}.}

\item{colunas}{Character. Optional vector of columns to keep.}

\item{save.dbc}{Logical. If TRUE, saves the downloaded DBC files locally.}

\item{pasta.dbc}{Character. Path to the output directory where the DBC files will be saved.
Defaults to the current working directory if not provided.}

\item{return_files}{Logical. If TRUE, returns a list with both the file index and the downloaded data.
If FALSE, returns only the downloaded data.}
}
\value{
If \code{return_files = TRUE}, returns a list with:
\describe{
\item{files}{A data.frame containing the indexed files, download links and status information.}
\item{data}{A data.frame with the downloaded microdata (only if \code{open = TRUE}).}
}
If \code{return_files = FALSE}, returns only the \code{data} object.
}
\description{
Downloads public health datasets from the DATASUS FTP server (ftp.datasus.gov.br),
supports data preprocessing and filtering, optionally saves the DBC files,
and returns the downloaded data as a data.frame.
}
\examples{
\dontrun{
res <- dtsus_download(
  fonte = "CNES",
  tipo = "LT",
  uf = "MG",
  Data_inicio = 201801,
  Data_fim = 201803,
  open = TRUE,
  save.dbc = FALSE,
  return_files = TRUE
)

head(res$data)
}
}
